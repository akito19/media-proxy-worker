name = "media-proxy"
main = "build/worker/shim.mjs"
compatibility_date = "2024-09-23"

[build]
command = "cargo install worker-build && worker-build --release"

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "your-bucket-name"

[routes]
pattern = "r2.your-domain.com/*"
zone_name = "your-domain.com"

# Environment variables are set via:
# - Cloudflare Dashboard: Workers & Pages > Settings > Variables
# - Wrangler CLI: wrangler secret put VARIABLE_NAME
#
# Required variables:
# - ALLOWED_ORIGINS: Comma-separated list of allowed origins
#   Example: https://example.com,https://cms.example.com
#
# Optional variables:
# - BLOCK_NO_REFERER: Block requests without Referer header (default: true)
# - CACHE_CONTROL: Cache-Control header value (default: public, max-age=31536000, immutable)
